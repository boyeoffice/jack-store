version: "3.8"
services:
  # Mysql database container
  # mysql:
  #   image: mysql/mysql-server:8.0
  #   container_name: jack_db
  #   command: mysqld --default-authentication-plugin=mysql_native_password
  #   volumes:
  #     - db_data:/var/lib/mysql
  #   ports:
  #     - target: 3306
  #       published: ${MYSQL_PORT:-3306}
  #       protocol: tcp
  #   environment:
  #       # MYSQL_ALLOW_EMPTY_PASSWORD: 'yes'
  #     MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD:-root}
  #     MYSQL_USER: ${MYSQL_USER:-app}
  #     MYSQL_PASSWORD: ${MYSQL_PASSWORD:-!ChangeMe!}
  #     MYSQL_DATABASE: ${MYSQL_DATABASE:-app}
  #   networks:
  #       - symfony
  php:
    build:
      context: ./../
      dockerfile: ./.docker/php/Dockerfile
      args:
        UID: '${UID:-1000}'
        GID: '${GID:-1000}'
    container_name: jack_php
    ports:
      - target: 80
        published: ${HTTP_PORT:-8080}
        protocol: tcp
    #environment:
      #DATABASE_URL: mysql://${MYSQL_USER}:${MYSQL_PASSWORD}@mysql:${MYSQL_PORT}/${MYSQL_DATABASE}
    volumes:
      # - ./docker/php/vhosts:/etc/apache2/sites-enabled
      - /srv/app/vendor/
      - ./../:/srv/app/
    #depends_on:
      # - mysql
    # networks:
    #   - symfony

# networks:
#   symfony:

# volumes:
#   db_data:
